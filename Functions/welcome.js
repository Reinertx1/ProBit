var Canvas = require("canvas");
var { splitText, drawCircle, resizeText } = require("editor-canvas");
const axios = require("axios");
module.exports = {
  createWelcomeImage: async (member, welcomer) => {
    var _0x7890=["\x61\x76\x61\x74\x61\x72","\x75\x73\x65\x72\x6E\x61\x6D\x65","\x74\x65\x78\x74","\x62\x61\x63\x6B\x67\x72\x6F\x75\x6E\x64","\x62\x61\x73\x65\x36\x34","\x66\x72\x6F\x6D","\x6C\x6F\x61\x64\x49\x6D\x61\x67\x65","\x77\x69\x64\x74\x68","\x68\x65\x69\x67\x68\x74","\x63\x72\x65\x61\x74\x65\x43\x61\x6E\x76\x61\x73","\x32\x64","\x67\x65\x74\x43\x6F\x6E\x74\x65\x78\x74","\x64\x72\x61\x77\x49\x6D\x61\x67\x65","\x6A\x70\x67","\x64\x69\x73\x70\x6C\x61\x79\x41\x76\x61\x74\x61\x72\x55\x52\x4C","\x75\x73\x65\x72","\x59\x45\x4C\x4C\x4F\x57","\x78","\x79","\x66\x69\x6C\x6C\x53\x74\x79\x6C\x65","\x57\x48\x49\x54\x45","\x66\x6F\x6E\x74","","\x20\x41\x72\x69\x61\x6C","\x66\x69\x6C\x6C\x54\x65\x78\x74","\x77\x65\x6C\x63\x6F\x6D\x65\x20\x54\x6F","\x63\x6F\x6E\x74\x65\x6E\x74","\x74\x6F\x42\x75\x66\x66\x65\x72"];var avatars=welcomer[_0x7890[0]];var usernames=welcomer[_0x7890[1]];var text=welcomer[_0x7890[2]];var background=welcomer[_0x7890[3]];if(background){try{background=  await Canvas[_0x7890[6]](Buffer[_0x7890[5]](background,_0x7890[4]))}catch(err){background=  await Canvas[_0x7890[6]](background)}};var canvas=Canvas[_0x7890[9]](background?background[_0x7890[7]]:400,background?background[_0x7890[8]]:200),ctx=canvas[_0x7890[11]](_0x7890[10]);if(background){ctx[_0x7890[12]](background,0,0,canvas[_0x7890[7]],canvas[_0x7890[8]])};var avatar=member[_0x7890[15]][_0x7890[14]]({format:_0x7890[13]});avatar=  await drawCircle({image:avatar,stroke:_0x7890[16]});avatar=  await Canvas[_0x7890[6]](avatar);ctx[_0x7890[12]](avatar,avatars[_0x7890[17]],avatars[_0x7890[18]],avatars[_0x7890[7]],avatars[_0x7890[8]]);ctx[_0x7890[19]]= _0x7890[20];let usernameFont=resizeText(ctx,{text:member[_0x7890[15]][_0x7890[1]],font:17.5* (canvas[_0x7890[7]]/ 400)+ canvas[_0x7890[7]]/ 100});ctx[_0x7890[21]]= `${_0x7890[22]}${usernameFont}${_0x7890[23]}`;var username=splitText(ctx,{text:member[_0x7890[15]][_0x7890[1]],width:canvas[_0x7890[7]]- usernames[_0x7890[17]]- 20* (canvas[_0x7890[7]]/ 400),maxLine:1});ctx[_0x7890[24]](username,usernames[_0x7890[17]],usernames[_0x7890[18]]);let textFont=resizeText(ctx,{text:_0x7890[25],font:15.79* (canvas[_0x7890[7]]/ 400)+ canvas[_0x7890[7]]/ 100});ctx[_0x7890[21]]= `${_0x7890[22]}${textFont}${_0x7890[23]}`;var text1=splitText(ctx,{text:text[_0x7890[26]],width:canvas[_0x7890[7]]- text[_0x7890[17]]- 20* (canvas[_0x7890[7]]/ 400),maxLine:2});ctx[_0x7890[24]](text1,text[_0x7890[17]],text[_0x7890[18]]);return canvas[_0x7890[27]]()
  },
};
